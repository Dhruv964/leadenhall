"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/listDocuments";
exports.ids = ["pages/api/listDocuments"];
exports.modules = {

/***/ "node-appwrite":
/*!********************************!*\
  !*** external "node-appwrite" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("node-appwrite");

/***/ }),

/***/ "(api)/./pages/api/listDocuments.ts":
/*!************************************!*\
  !*** ./pages/api/listDocuments.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var node_appwrite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node-appwrite */ \"node-appwrite\");\n/* harmony import */ var node_appwrite__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(node_appwrite__WEBPACK_IMPORTED_MODULE_0__);\n// import sdk from \"node-appwrite\";\n// export default async function handler(req, res) {\n//     const client = new sdk.Client();\n//     const databases = new sdk.Databases(client);\n//     client\n//         .setEndpoint(process.env.NEXT_PUBLIC_ENDPOINT)\n//         .setProject(process.env.NEXT_PUBLIC_PROJECT)\n//         .setKey(process.env.NEXT_PUBLIC_KEY);\n//     try {\n//         const response = await databases.listDocuments(process.env.NEXT_PUBLIC_DATABASE, process.env.NEXT_PUBLIC_CHATS_COLLECTION);\n//         res.status(200).json(response);\n//         // const data = JSON.parse(response);\n//         // Filter objects with user_id \"tanmayjuneja\"\n//         const filteredData = response.documents.filter(doc => doc.user_id === \"tanmayjuneja12\");\n//         const numRequests = filteredData[0].num_requests;\n//     } catch (error) {\n//         console.error(error);\n//         res.status(500).json({ error: \"An error occurred\" });\n//     }\n// }\n// pages/api/getRequests.js\n\nasync function handler(req, res) {\n    const client = new (node_appwrite__WEBPACK_IMPORTED_MODULE_0___default().Client)();\n    const databases = new (node_appwrite__WEBPACK_IMPORTED_MODULE_0___default().Databases)(client);\n    client.setEndpoint(\"https://cloud.appwrite.io/v1\").setProject(\"64ac585281a2737d25cf\").setKey(\"60207dbb385c30f94a1f87a4ba189480279a980267f3d89be124c413f6e7508e4780cbddaf76441c359914d7b3adf5e5d87ba45dafea691ebc3d92ae2c0acc456438afea3b7100664405362a992d96ab2183217771cfa236b99b517a371d29a4bee89d50bcb76f6d958ab2614cdfbf544ed63a0ab1034b09dad77a5a6459aa52\");\n    try {\n        const response = await databases.listDocuments(\"64ac588688edf5762cca\", \"64b60cbb6f2ea6d94826\");\n        // console.log(response);\n        // Filter objects with user_id \"tanmayjuneja\"\n        const totalConversations = response[\"total\"];\n        const filteredData = response.documents.filter((doc)=>doc.user_id === \"tanmayjuneja12\");\n        const numRequests = parseInt(filteredData[0].num_requests);\n        const fallBack = parseInt(filteredData[0].negative_responses);\n        const convertedLeads = totalConversations - fallBack;\n        // Get the count of unique user IDs\n        // Specify the target date for which you want to count new users\n        const targetDate = \"2023-07-18\"; // Change this date to your desired target date\n        // Create a Set to store unique user IDs\n        const uniqueUserIds = new Set();\n        // Iterate through the documents array and add user IDs to the Set\n        response.documents.forEach((document)=>{\n            uniqueUserIds.add(document.user_id);\n        });\n        // Get the count of unique user IDs\n        const numberOfUniqueUserIds = uniqueUserIds.size;\n        // Calculate new unique users for the target date\n        const numChatsTargetDate = response.documents.filter((document)=>{\n            const createdAtDate = new Date(document[\"$createdAt\"]).toISOString().split(\"T\")[0];\n            return createdAtDate === targetDate;\n        }).length;\n        // Calculate new unique users for today\n        const currentDate = new Date().toISOString().split(\"T\")[0];\n        const numChatsToday = response.documents.filter((document)=>{\n            const createdAtDate = new Date(document[\"$createdAt\"]).toISOString().split(\"T\")[0];\n            return createdAtDate === currentDate;\n        }).length;\n        const newUsersForTargetDate = response.documents.filter((document)=>{\n            const createdAtDate = new Date(document[\"$createdAt\"]).toISOString().split(\"T\")[0];\n            return createdAtDate === targetDate;\n        }).reduce((accumulator, document)=>{\n            accumulator.add(document.user_id);\n            return accumulator;\n        }, new Set()).size;\n        console.log(`New unique users for ${targetDate}: ${newUsersForTargetDate}`);\n        // Calculate new unique users for today\n        const newUsersForToday = response.documents.filter((document)=>{\n            const createdAtDate = new Date(document[\"$createdAt\"]).toISOString().split(\"T\")[0];\n            return createdAtDate === currentDate;\n        }).reduce((accumulator, document)=>{\n            accumulator.add(document.user_id);\n            return accumulator;\n        }, new Set()).size;\n        const datesArray = [];\n        const numChatsArray = [];\n        const numUniqueUsersArray = [];\n        for(let i = 0; i < 7; i++){\n            const currentDate1 = new Date();\n            currentDate1.setDate(currentDate1.getDate() - i);\n            const currentDateString = currentDate1.toISOString().split(\"T\")[0];\n            datesArray.unshift(currentDateString); // Add the date to the beginning of the array\n            // Calculate the number of chats for the current date\n            const numChatsForDate = response.documents.filter((document)=>{\n                const createdAtDate = new Date(document[\"$createdAt\"]).toISOString().split(\"T\")[0];\n                return createdAtDate === currentDateString;\n            }).length;\n            numChatsArray.unshift(numChatsForDate); // Add the number of chats to the beginning of the array\n            // Calculate the number of unique users for the current date\n            const numUniqueUsersForDate = response.documents.filter((document)=>{\n                const createdAtDate = new Date(document[\"$createdAt\"]).toISOString().split(\"T\")[0];\n                return createdAtDate === currentDateString;\n            }).reduce((accumulator, document)=>{\n                accumulator.add(document.user_id);\n                return accumulator;\n            }, new Set()).size;\n            numUniqueUsersArray.unshift(numUniqueUsersForDate); // Add the number of unique users to the beginning of the array\n        }\n        res.status(200).json({\n            numRequests,\n            totalConversations,\n            convertedLeads,\n            fallBack,\n            numberOfUniqueUserIds,\n            numChatsToday,\n            numChatsTargetDate,\n            newUsersForToday,\n            newUsersForTargetDate,\n            datesArray,\n            numChatsArray,\n            numUniqueUsersArray\n        });\n    } catch (error) {\n        console.error(error);\n        res.status(500).json({\n            error: \"An error occurred\"\n        });\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUM7WUFBRUMsS0FBSyxFQUFFLG1CQUFtQjtTQUFFLENBQUMsQ0FBQztJQUN6RCxDQUFDO0FBQ0wsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2Rhc2hib2FyZC8uL3BhZ2VzL2FwaS9saXN0RG9jdW1lbnRzLnRzPzNkYTYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gaW1wb3J0IHNkayBmcm9tIFwibm9kZS1hcHB3cml0ZVwiO1xyXG5cclxuLy8gZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xyXG4vLyAgICAgY29uc3QgY2xpZW50ID0gbmV3IHNkay5DbGllbnQoKTtcclxuLy8gICAgIGNvbnN0IGRhdGFiYXNlcyA9IG5ldyBzZGsuRGF0YWJhc2VzKGNsaWVudCk7XHJcblxyXG4vLyAgICAgY2xpZW50XHJcbi8vICAgICAgICAgLnNldEVuZHBvaW50KHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0VORFBPSU5UKVxyXG4vLyAgICAgICAgIC5zZXRQcm9qZWN0KHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1BST0pFQ1QpXHJcbi8vICAgICAgICAgLnNldEtleShwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19LRVkpO1xyXG5cclxuLy8gICAgIHRyeSB7XHJcbi8vICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBkYXRhYmFzZXMubGlzdERvY3VtZW50cyhwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19EQVRBQkFTRSwgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQ0hBVFNfQ09MTEVDVElPTik7XHJcbi8vICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24ocmVzcG9uc2UpO1xyXG4vLyAgICAgICAgIC8vIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlKTtcclxuXHJcbi8vICAgICAgICAgLy8gRmlsdGVyIG9iamVjdHMgd2l0aCB1c2VyX2lkIFwidGFubWF5anVuZWphXCJcclxuLy8gICAgICAgICBjb25zdCBmaWx0ZXJlZERhdGEgPSByZXNwb25zZS5kb2N1bWVudHMuZmlsdGVyKGRvYyA9PiBkb2MudXNlcl9pZCA9PT0gXCJ0YW5tYXlqdW5lamExMlwiKTtcclxuLy8gICAgICAgICBjb25zdCBudW1SZXF1ZXN0cyA9IGZpbHRlcmVkRGF0YVswXS5udW1fcmVxdWVzdHM7XHJcbi8vICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4vLyAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4vLyAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IFwiQW4gZXJyb3Igb2NjdXJyZWRcIiB9KTtcclxuLy8gICAgIH1cclxuLy8gfVxyXG5cclxuXHJcbi8vIHBhZ2VzL2FwaS9nZXRSZXF1ZXN0cy5qc1xyXG5cclxuaW1wb3J0IHNkayBmcm9tIFwibm9kZS1hcHB3cml0ZVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xyXG4gICAgY29uc3QgY2xpZW50ID0gbmV3IHNkay5DbGllbnQoKTtcclxuICAgIGNvbnN0IGRhdGFiYXNlcyA9IG5ldyBzZGsuRGF0YWJhc2VzKGNsaWVudCk7XHJcblxyXG4gICAgY2xpZW50XHJcbiAgICAgICAgLnNldEVuZHBvaW50KHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0VORFBPSU5UKVxyXG4gICAgICAgIC5zZXRQcm9qZWN0KHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1BST0pFQ1QpXHJcbiAgICAgICAgLnNldEtleShwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19LRVkpO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBkYXRhYmFzZXMubGlzdERvY3VtZW50cyhwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19EQVRBQkFTRSwgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQ0hBVFNfQ09MTEVDVElPTik7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2cocmVzcG9uc2UpO1xyXG4gICAgICAgIC8vIEZpbHRlciBvYmplY3RzIHdpdGggdXNlcl9pZCBcInRhbm1heWp1bmVqYVwiXHJcbiAgICAgICAgY29uc3QgdG90YWxDb252ZXJzYXRpb25zID0gcmVzcG9uc2VbXCJ0b3RhbFwiXTtcclxuXHJcbiAgICAgICAgY29uc3QgZmlsdGVyZWREYXRhID0gcmVzcG9uc2UuZG9jdW1lbnRzLmZpbHRlcihkb2MgPT4gZG9jLnVzZXJfaWQgPT09IFwidGFubWF5anVuZWphMTJcIik7XHJcblxyXG4gICAgICAgIGNvbnN0IG51bVJlcXVlc3RzID0gcGFyc2VJbnQoZmlsdGVyZWREYXRhWzBdLm51bV9yZXF1ZXN0cyk7XHJcblxyXG4gICAgICAgIGNvbnN0IGZhbGxCYWNrID0gcGFyc2VJbnQoZmlsdGVyZWREYXRhWzBdLm5lZ2F0aXZlX3Jlc3BvbnNlcyk7XHJcbiAgICAgICAgY29uc3QgY29udmVydGVkTGVhZHMgPSB0b3RhbENvbnZlcnNhdGlvbnMgLSBmYWxsQmFjaztcclxuXHJcblxyXG5cclxuICAgICAgICAvLyBHZXQgdGhlIGNvdW50IG9mIHVuaXF1ZSB1c2VyIElEc1xyXG4gICAgICAgIC8vIFNwZWNpZnkgdGhlIHRhcmdldCBkYXRlIGZvciB3aGljaCB5b3Ugd2FudCB0byBjb3VudCBuZXcgdXNlcnNcclxuICAgICAgICBjb25zdCB0YXJnZXREYXRlID0gJzIwMjMtMDctMTgnOyAvLyBDaGFuZ2UgdGhpcyBkYXRlIHRvIHlvdXIgZGVzaXJlZCB0YXJnZXQgZGF0ZVxyXG5cclxuICAgICAgICAvLyBDcmVhdGUgYSBTZXQgdG8gc3RvcmUgdW5pcXVlIHVzZXIgSURzXHJcbiAgICAgICAgY29uc3QgdW5pcXVlVXNlcklkcyA9IG5ldyBTZXQoKTtcclxuXHJcbiAgICAgICAgLy8gSXRlcmF0ZSB0aHJvdWdoIHRoZSBkb2N1bWVudHMgYXJyYXkgYW5kIGFkZCB1c2VyIElEcyB0byB0aGUgU2V0XHJcbiAgICAgICAgcmVzcG9uc2UuZG9jdW1lbnRzLmZvckVhY2goZG9jdW1lbnQgPT4ge1xyXG4gICAgICAgICAgICB1bmlxdWVVc2VySWRzLmFkZChkb2N1bWVudC51c2VyX2lkKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gR2V0IHRoZSBjb3VudCBvZiB1bmlxdWUgdXNlciBJRHNcclxuICAgICAgICBjb25zdCBudW1iZXJPZlVuaXF1ZVVzZXJJZHMgPSB1bmlxdWVVc2VySWRzLnNpemU7XHJcblxyXG4gICAgICAgIC8vIENhbGN1bGF0ZSBuZXcgdW5pcXVlIHVzZXJzIGZvciB0aGUgdGFyZ2V0IGRhdGVcclxuICAgICAgICBjb25zdCBudW1DaGF0c1RhcmdldERhdGUgPSByZXNwb25zZS5kb2N1bWVudHMuZmlsdGVyKGRvY3VtZW50ID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY3JlYXRlZEF0RGF0ZSA9IG5ldyBEYXRlKGRvY3VtZW50WyckY3JlYXRlZEF0J10pLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcclxuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZWRBdERhdGUgPT09IHRhcmdldERhdGU7XHJcbiAgICAgICAgfSkubGVuZ3RoO1xyXG5cclxuICAgICAgICAvLyBDYWxjdWxhdGUgbmV3IHVuaXF1ZSB1c2VycyBmb3IgdG9kYXlcclxuICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xyXG4gICAgICAgIGNvbnN0IG51bUNoYXRzVG9kYXkgPSByZXNwb25zZS5kb2N1bWVudHMuZmlsdGVyKGRvY3VtZW50ID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY3JlYXRlZEF0RGF0ZSA9IG5ldyBEYXRlKGRvY3VtZW50WyckY3JlYXRlZEF0J10pLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcclxuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZWRBdERhdGUgPT09IGN1cnJlbnREYXRlO1xyXG4gICAgICAgIH0pLmxlbmd0aDtcclxuXHJcblxyXG4gICAgICAgIGNvbnN0IG5ld1VzZXJzRm9yVGFyZ2V0RGF0ZSA9IHJlc3BvbnNlLmRvY3VtZW50cy5maWx0ZXIoZG9jdW1lbnQgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjcmVhdGVkQXREYXRlID0gbmV3IERhdGUoZG9jdW1lbnRbJyRjcmVhdGVkQXQnXSkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xyXG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlZEF0RGF0ZSA9PT0gdGFyZ2V0RGF0ZTtcclxuICAgICAgICB9KS5yZWR1Y2UoKGFjY3VtdWxhdG9yLCBkb2N1bWVudCkgPT4ge1xyXG4gICAgICAgICAgICBhY2N1bXVsYXRvci5hZGQoZG9jdW1lbnQudXNlcl9pZCk7XHJcbiAgICAgICAgICAgIHJldHVybiBhY2N1bXVsYXRvcjtcclxuICAgICAgICB9LCBuZXcgU2V0KCkpLnNpemU7XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKGBOZXcgdW5pcXVlIHVzZXJzIGZvciAke3RhcmdldERhdGV9OiAke25ld1VzZXJzRm9yVGFyZ2V0RGF0ZX1gKTtcclxuXHJcbiAgICAgICAgLy8gQ2FsY3VsYXRlIG5ldyB1bmlxdWUgdXNlcnMgZm9yIHRvZGF5XHJcbiAgICAgICAgY29uc3QgbmV3VXNlcnNGb3JUb2RheSA9IHJlc3BvbnNlLmRvY3VtZW50cy5maWx0ZXIoZG9jdW1lbnQgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjcmVhdGVkQXREYXRlID0gbmV3IERhdGUoZG9jdW1lbnRbJyRjcmVhdGVkQXQnXSkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xyXG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlZEF0RGF0ZSA9PT0gY3VycmVudERhdGU7XHJcbiAgICAgICAgfSkucmVkdWNlKChhY2N1bXVsYXRvciwgZG9jdW1lbnQpID0+IHtcclxuICAgICAgICAgICAgYWNjdW11bGF0b3IuYWRkKGRvY3VtZW50LnVzZXJfaWQpO1xyXG4gICAgICAgICAgICByZXR1cm4gYWNjdW11bGF0b3I7XHJcbiAgICAgICAgfSwgbmV3IFNldCgpKS5zaXplO1xyXG5cclxuICAgICAgICBjb25zdCBkYXRlc0FycmF5ID0gW107XHJcbiAgICAgICAgY29uc3QgbnVtQ2hhdHNBcnJheSA9IFtdO1xyXG4gICAgICAgIGNvbnN0IG51bVVuaXF1ZVVzZXJzQXJyYXkgPSBbXTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA3OyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICBjdXJyZW50RGF0ZS5zZXREYXRlKGN1cnJlbnREYXRlLmdldERhdGUoKSAtIGkpO1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50RGF0ZVN0cmluZyA9IGN1cnJlbnREYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcclxuXHJcbiAgICAgICAgICAgIGRhdGVzQXJyYXkudW5zaGlmdChjdXJyZW50RGF0ZVN0cmluZyk7IC8vIEFkZCB0aGUgZGF0ZSB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSBhcnJheVxyXG5cclxuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBudW1iZXIgb2YgY2hhdHMgZm9yIHRoZSBjdXJyZW50IGRhdGVcclxuICAgICAgICAgICAgY29uc3QgbnVtQ2hhdHNGb3JEYXRlID0gcmVzcG9uc2UuZG9jdW1lbnRzLmZpbHRlcihkb2N1bWVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjcmVhdGVkQXREYXRlID0gbmV3IERhdGUoZG9jdW1lbnRbJyRjcmVhdGVkQXQnXSkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZWRBdERhdGUgPT09IGN1cnJlbnREYXRlU3RyaW5nO1xyXG4gICAgICAgICAgICB9KS5sZW5ndGg7XHJcbiAgICAgICAgICAgIG51bUNoYXRzQXJyYXkudW5zaGlmdChudW1DaGF0c0ZvckRhdGUpOyAvLyBBZGQgdGhlIG51bWJlciBvZiBjaGF0cyB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSBhcnJheVxyXG5cclxuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBudW1iZXIgb2YgdW5pcXVlIHVzZXJzIGZvciB0aGUgY3VycmVudCBkYXRlXHJcbiAgICAgICAgICAgIGNvbnN0IG51bVVuaXF1ZVVzZXJzRm9yRGF0ZSA9IHJlc3BvbnNlLmRvY3VtZW50cy5maWx0ZXIoZG9jdW1lbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY3JlYXRlZEF0RGF0ZSA9IG5ldyBEYXRlKGRvY3VtZW50WyckY3JlYXRlZEF0J10pLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVkQXREYXRlID09PSBjdXJyZW50RGF0ZVN0cmluZztcclxuICAgICAgICAgICAgfSkucmVkdWNlKChhY2N1bXVsYXRvciwgZG9jdW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGFjY3VtdWxhdG9yLmFkZChkb2N1bWVudC51c2VyX2lkKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhY2N1bXVsYXRvcjtcclxuICAgICAgICAgICAgfSwgbmV3IFNldCgpKS5zaXplO1xyXG4gICAgICAgICAgICBudW1VbmlxdWVVc2Vyc0FycmF5LnVuc2hpZnQobnVtVW5pcXVlVXNlcnNGb3JEYXRlKTsgLy8gQWRkIHRoZSBudW1iZXIgb2YgdW5pcXVlIHVzZXJzIHRvIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGFycmF5XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICAgICAgICBudW1SZXF1ZXN0cyxcclxuICAgICAgICAgICAgdG90YWxDb252ZXJzYXRpb25zLFxyXG4gICAgICAgICAgICBjb252ZXJ0ZWRMZWFkcyxcclxuICAgICAgICAgICAgZmFsbEJhY2ssXHJcbiAgICAgICAgICAgIG51bWJlck9mVW5pcXVlVXNlcklkcyxcclxuICAgICAgICAgICAgbnVtQ2hhdHNUb2RheSxcclxuICAgICAgICAgICAgbnVtQ2hhdHNUYXJnZXREYXRlLFxyXG4gICAgICAgICAgICBuZXdVc2Vyc0ZvclRvZGF5LFxyXG4gICAgICAgICAgICBuZXdVc2Vyc0ZvclRhcmdldERhdGUsXHJcbiAgICAgICAgICAgIGRhdGVzQXJyYXksXHJcbiAgICAgICAgICAgIG51bUNoYXRzQXJyYXksXHJcbiAgICAgICAgICAgIG51bVVuaXF1ZVVzZXJzQXJyYXlcclxuICAgICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogXCJBbiBlcnJvciBvY2N1cnJlZFwiIH0pO1xyXG4gICAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJzZGsiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwiY2xpZW50IiwiQ2xpZW50IiwiZGF0YWJhc2VzIiwiRGF0YWJhc2VzIiwic2V0RW5kcG9pbnQiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfRU5EUE9JTlQiLCJzZXRQcm9qZWN0IiwiTkVYVF9QVUJMSUNfUFJPSkVDVCIsInNldEtleSIsIk5FWFRfUFVCTElDX0tFWSIsInJlc3BvbnNlIiwibGlzdERvY3VtZW50cyIsIk5FWFRfUFVCTElDX0RBVEFCQVNFIiwiTkVYVF9QVUJMSUNfQ0hBVFNfQ09MTEVDVElPTiIsInRvdGFsQ29udmVyc2F0aW9ucyIsImZpbHRlcmVkRGF0YSIsImRvY3VtZW50cyIsImZpbHRlciIsImRvYyIsInVzZXJfaWQiLCJudW1SZXF1ZXN0cyIsInBhcnNlSW50IiwibnVtX3JlcXVlc3RzIiwiZmFsbEJhY2siLCJuZWdhdGl2ZV9yZXNwb25zZXMiLCJjb252ZXJ0ZWRMZWFkcyIsInRhcmdldERhdGUiLCJ1bmlxdWVVc2VySWRzIiwiU2V0IiwiZm9yRWFjaCIsImRvY3VtZW50IiwiYWRkIiwibnVtYmVyT2ZVbmlxdWVVc2VySWRzIiwic2l6ZSIsIm51bUNoYXRzVGFyZ2V0RGF0ZSIsImNyZWF0ZWRBdERhdGUiLCJEYXRlIiwidG9JU09TdHJpbmciLCJzcGxpdCIsImxlbmd0aCIsImN1cnJlbnREYXRlIiwibnVtQ2hhdHNUb2RheSIsIm5ld1VzZXJzRm9yVGFyZ2V0RGF0ZSIsInJlZHVjZSIsImFjY3VtdWxhdG9yIiwiY29uc29sZSIsImxvZyIsIm5ld1VzZXJzRm9yVG9kYXkiLCJkYXRlc0FycmF5IiwibnVtQ2hhdHNBcnJheSIsIm51bVVuaXF1ZVVzZXJzQXJyYXkiLCJpIiwic2V0RGF0ZSIsImdldERhdGUiLCJjdXJyZW50RGF0ZVN0cmluZyIsInVuc2hpZnQiLCJudW1DaGF0c0ZvckRhdGUiLCJudW1VbmlxdWVVc2Vyc0ZvckRhdGUiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/listDocuments.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/listDocuments.ts"));
module.exports = __webpack_exports__;

})();